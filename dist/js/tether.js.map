{"version":3,"file":"tether.js","sources":["../../src/js/evented.js","../../src/js/utils.js","../../src/js/constraint.js","../../src/js/abutment.js","../../src/js/shift.js","../../src/js/tether.js"],"sourcesContent":["export class Evented {\n  on(event, handler, ctx, once = false) {\n    if (typeof this.bindings === 'undefined') {\n      this.bindings = {};\n    }\n    if (typeof this.bindings[event] === 'undefined') {\n      this.bindings[event] = [];\n    }\n    this.bindings[event].push({ handler, ctx, once });\n\n    return this;\n  }\n\n  once(event, handler, ctx) {\n    return this.on(event, handler, ctx, true);\n  }\n\n  off(event, handler) {\n    if (typeof this.bindings === 'undefined' ||\n      typeof this.bindings[event] === 'undefined') {\n      return this;\n    }\n\n    if (typeof handler === 'undefined') {\n      delete this.bindings[event];\n    } else {\n      let i = 0;\n      while (i < this.bindings[event].length) {\n        if (this.bindings[event][i].handler === handler) {\n          this.bindings[event].splice(i, 1);\n        } else {\n          ++i;\n        }\n      }\n    }\n\n    return this;\n  }\n\n  trigger(event, ...args) {\n    if (typeof this.bindings !== 'undefined' && this.bindings[event]) {\n      let i = 0;\n      while (i < this.bindings[event].length) {\n        const { handler, ctx, once } = this.bindings[event][i];\n\n        let context = ctx;\n        if (typeof context === 'undefined') {\n          context = this;\n        }\n\n        handler.apply(context, args);\n\n        if (once) {\n          this.bindings[event].splice(i, 1);\n        } else {\n          ++i;\n        }\n      }\n    }\n\n    return this;\n  }\n}\n","let TetherBase;\nif (typeof TetherBase === 'undefined') {\n  TetherBase = { modules: [] };\n}\n\nlet zeroElement = null;\n\n// Same as native getBoundingClientRect, except it takes into account parent <frame> offsets\n// if the element lies within a nested document (<frame> or <iframe>-like).\nfunction getActualBoundingClientRect(node) {\n  let boundingRect = node.getBoundingClientRect();\n\n  // The original object returned by getBoundingClientRect is immutable, so we clone it\n  // We can't use extend because the properties are not considered part of the object by hasOwnProperty in IE9\n  let rect = {};\n  for (let k in boundingRect) {\n    rect[k] = boundingRect[k];\n  }\n\n  try {\n    if (node.ownerDocument !== document) {\n      let { frameElement } = node.ownerDocument.defaultView;\n      if (frameElement) {\n        let frameRect = getActualBoundingClientRect(frameElement);\n        rect.top += frameRect.top;\n        rect.bottom += frameRect.top;\n        rect.left += frameRect.left;\n        rect.right += frameRect.left;\n      }\n    }\n  } catch(err) {\n    // Ignore \"Access is denied\" in IE11/Edge\n  }\n\n  return rect;\n}\n\nfunction getScrollParents(el) {\n  // In firefox if the el is inside an iframe with display: none; window.getComputedStyle() will return null;\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  const computedStyle = getComputedStyle(el) || {};\n  const { position } = computedStyle;\n  let parents = [];\n\n  if (position === 'fixed') {\n    return [el];\n  }\n\n  let parent = el;\n  while ((parent = parent.parentNode) && parent && parent.nodeType === 1) {\n    let style;\n    try {\n      style = getComputedStyle(parent);\n    } catch(err) {\n      // Intentionally blank\n    }\n\n    if (typeof style === 'undefined' || style === null) {\n      parents.push(parent);\n      return parents;\n    }\n\n    const { overflow, overflowX, overflowY } = style;\n    if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n      if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {\n        parents.push(parent);\n      }\n    }\n  }\n\n  parents.push(el.ownerDocument.body);\n\n  // If the node is within a frame, account for the parent window scroll\n  if (el.ownerDocument !== document) {\n    parents.push(el.ownerDocument.defaultView);\n  }\n\n  return parents;\n}\n\nconst uniqueId = (() => {\n  let id = 0;\n  return () => ++id;\n})();\n\nconst zeroPosCache = {};\nconst getOrigin = () => {\n  // getBoundingClientRect is unfortunately too accurate.  It introduces a pixel or two of\n  // jitter as the user scrolls that messes with our ability to detect if two positions\n  // are equivilant or not.  We place an element at the top left of the page that will\n  // get the same jitter, so we can cancel the two out.\n  let node = zeroElement;\n  if (!node || !document.body.contains(node)) {\n    node = document.createElement('div');\n    node.setAttribute('data-tether-id', uniqueId());\n    extend(node.style, {\n      top: 0,\n      left: 0,\n      position: 'absolute'\n    });\n\n    document.body.appendChild(node);\n\n    zeroElement = node;\n  }\n\n  const id = node.getAttribute('data-tether-id');\n  if (typeof zeroPosCache[id] === 'undefined') {\n    zeroPosCache[id] = getActualBoundingClientRect(node);\n\n    // Clear the cache when this position call is done\n    defer(() => {\n      delete zeroPosCache[id];\n    });\n  }\n\n  return zeroPosCache[id];\n};\n\nfunction removeUtilElements() {\n  if (zeroElement) {\n    document.body.removeChild(zeroElement);\n  }\n  zeroElement = null;\n}\n\nfunction getBounds(el) {\n  let doc;\n  if (el === document) {\n    doc = document;\n    el = document.documentElement;\n  } else {\n    doc = el.ownerDocument;\n  }\n\n  const docEl = doc.documentElement;\n\n  const box = getActualBoundingClientRect(el);\n\n  const origin = getOrigin();\n\n  box.top -= origin.top;\n  box.left -= origin.left;\n\n  if (typeof box.width === 'undefined') {\n    box.width = document.body.scrollWidth - box.left - box.right;\n  }\n  if (typeof box.height === 'undefined') {\n    box.height = document.body.scrollHeight - box.top - box.bottom;\n  }\n\n  box.top = box.top - docEl.clientTop;\n  box.left = box.left - docEl.clientLeft;\n  box.right = doc.body.clientWidth - box.width - box.left;\n  box.bottom = doc.body.clientHeight - box.height - box.top;\n\n  return box;\n}\n\nfunction getOffsetParent(el) {\n  return el.offsetParent || document.documentElement;\n}\n\nlet _scrollBarSize = null;\n\nfunction getScrollBarSize() {\n  if (_scrollBarSize) {\n    return _scrollBarSize;\n  }\n  const inner = document.createElement('div');\n  inner.style.width = '100%';\n  inner.style.height = '200px';\n\n  const outer = document.createElement('div');\n  extend(outer.style, {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    pointerEvents: 'none',\n    visibility: 'hidden',\n    width: '200px',\n    height: '150px',\n    overflow: 'hidden'\n  });\n\n  outer.appendChild(inner);\n\n  document.body.appendChild(outer);\n\n  const widthContained = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  let widthScroll = inner.offsetWidth;\n\n  if (widthContained === widthScroll) {\n    widthScroll = outer.clientWidth;\n  }\n\n  document.body.removeChild(outer);\n\n  const width = widthContained - widthScroll;\n\n  _scrollBarSize = { width, height: width };\n  return _scrollBarSize;\n}\n\nfunction extend(out = {}) {\n  const args = [];\n\n  Array.prototype.push.apply(args, arguments);\n\n  args.slice(1).forEach((obj) => {\n    if (obj) {\n      for (let key in obj) {\n        if ({}.hasOwnProperty.call(obj, key)) {\n          out[key] = obj[key];\n        }\n      }\n    }\n  });\n\n  return out;\n}\n\nfunction removeClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    name.split(' ').forEach((cls) => {\n      if (cls.trim()) {\n        el.classList.remove(cls);\n      }\n    });\n  } else {\n    const regex = new RegExp(`(^| )${name.split(' ').join('|')}( |$)`, 'gi');\n    const className = getClassName(el).replace(regex, ' ');\n    setClassName(el, className);\n  }\n}\n\nfunction addClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    name.split(' ').forEach((cls) => {\n      if (cls.trim()) {\n        el.classList.add(cls);\n      }\n    });\n  } else {\n    removeClass(el, name);\n    const cls = `${getClassName(el)} ${name}`;\n    setClassName(el, cls);\n  }\n}\n\nfunction hasClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    return el.classList.contains(name);\n  }\n  const className = getClassName(el);\n  return new RegExp(`(^| )${name}( |$)`, 'gi').test(className);\n}\n\nfunction getClassName(el) {\n  // Can't use just SVGAnimatedString here since nodes within a Frame in IE have\n  // completely separately SVGAnimatedString base classes\n  if (el.className instanceof el.ownerDocument.defaultView.SVGAnimatedString) {\n    return el.className.baseVal;\n  }\n  return el.className;\n}\n\nfunction setClassName(el, className) {\n  el.setAttribute('class', className);\n}\n\nfunction updateClasses(el, add, all) {\n  // Of the set of 'all' classes, we need the 'add' classes, and only the\n  // 'add' classes to be set.\n  all.forEach((cls) => {\n    if (add.indexOf(cls) === -1 && hasClass(el, cls)) {\n      removeClass(el, cls);\n    }\n  });\n\n  add.forEach((cls) => {\n    if (!hasClass(el, cls)) {\n      addClass(el, cls);\n    }\n  });\n}\n\nconst deferred = [];\n\nconst defer = (fn) => {\n  deferred.push(fn);\n};\n\nconst flush = () => {\n  let fn;\n  // eslint-disable-next-line\n  while (fn = deferred.pop()) {\n    fn();\n  }\n};\n\nTetherBase.Utils = {\n  getActualBoundingClientRect,\n  getScrollParents,\n  getBounds,\n  getOffsetParent,\n  extend,\n  addClass,\n  removeClass,\n  hasClass,\n  updateClasses,\n  defer,\n  flush,\n  uniqueId,\n  getScrollBarSize,\n  removeUtilElements\n};\n\nexport default TetherBase;\n","import TetherBase from './utils';\n\nconst {\n  getBounds,\n  extend,\n  updateClasses,\n  defer\n} = TetherBase.Utils;\n\nconst BOUNDS_FORMAT = ['left', 'top', 'right', 'bottom'];\n\nfunction getBoundingRect(tether, to) {\n  if (to === 'scrollParent') {\n    to = tether.scrollParents[0];\n  } else if (to === 'window') {\n    to = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset];\n  }\n\n  if (to === document) {\n    to = to.documentElement;\n  }\n\n  if (typeof to.nodeType !== 'undefined') {\n    const node = to;\n    const size = getBounds(to);\n    const pos = size;\n    const style = getComputedStyle(to);\n\n    to = [pos.left, pos.top, size.width + pos.left, size.height + pos.top];\n\n    // Account any parent Frames scroll offset\n    if (node.ownerDocument !== document) {\n      let win = node.ownerDocument.defaultView;\n      to[0] += win.pageXOffset;\n      to[1] += win.pageYOffset;\n      to[2] += win.pageXOffset;\n      to[3] += win.pageYOffset;\n    }\n\n    BOUNDS_FORMAT.forEach((side, i) => {\n      side = side[0].toUpperCase() + side.substr(1);\n      if (side === 'Top' || side === 'Left') {\n        to[i] += parseFloat(style[`border${side}Width`]);\n      } else {\n        to[i] -= parseFloat(style[`border${side}Width`]);\n      }\n    });\n  }\n\n  return to;\n}\n\nTetherBase.modules.push({\n  position({ top, left, targetAttachment }) {\n    if (!this.options.constraints) {\n      return true;\n    }\n\n    let { height, width } = this.cache('element-bounds', () => {\n      return getBounds(this.element);\n    });\n\n    if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n      // Handle the item getting hidden as a result of our positioning without glitching\n      // the classes in and out\n      ({ width, height } = this.lastSize);\n    }\n\n    const targetSize = this.cache('target-bounds', () => {\n      return this.getTargetBounds();\n    });\n\n    const { height: targetHeight, width: targetWidth } = targetSize;\n\n    const allClasses = [this.getClass('pinned'), this.getClass('out-of-bounds')];\n\n    this.options.constraints.forEach((constraint) => {\n      const { outOfBoundsClass, pinnedClass } = constraint;\n      if (outOfBoundsClass) {\n        allClasses.push(outOfBoundsClass);\n      }\n      if (pinnedClass) {\n        allClasses.push(pinnedClass);\n      }\n    });\n\n    allClasses.forEach((cls) => {\n      ['left', 'top', 'right', 'bottom'].forEach((side) => {\n        allClasses.push(`${cls}-${side}`);\n      });\n    });\n\n    const addClasses = [];\n\n    const tAttachment = extend({}, targetAttachment);\n    const eAttachment = extend({}, this.attachment);\n\n    this.options.constraints.forEach((constraint) => {\n      let { to, attachment, pin } = constraint;\n\n      if (typeof attachment === 'undefined') {\n        attachment = '';\n      }\n\n      let changeAttachX, changeAttachY;\n      if (attachment.indexOf(' ') >= 0) {\n        [changeAttachY, changeAttachX] = attachment.split(' ');\n      } else {\n        changeAttachX = changeAttachY = attachment;\n      }\n\n      const bounds = getBoundingRect(this, to);\n\n      if (changeAttachY === 'target' || changeAttachY === 'both') {\n        if (top < bounds[1] && tAttachment.top === 'top') {\n          top += targetHeight;\n          tAttachment.top = 'bottom';\n        }\n\n        if (top + height > bounds[3] && tAttachment.top === 'bottom') {\n          top -= targetHeight;\n          tAttachment.top = 'top';\n        }\n      }\n\n      if (changeAttachY === 'together') {\n        if (tAttachment.top === 'top') {\n          if (eAttachment.top === 'bottom' && top < bounds[1]) {\n            top += targetHeight;\n            tAttachment.top = 'bottom';\n\n            top += height;\n            eAttachment.top = 'top';\n\n          } else if (eAttachment.top === 'top' && top + height > bounds[3] && top - (height - targetHeight) >= bounds[1]) {\n            top -= height - targetHeight;\n            tAttachment.top = 'bottom';\n\n            eAttachment.top = 'bottom';\n          }\n        }\n\n        if (tAttachment.top === 'bottom') {\n          if (eAttachment.top === 'top' && top + height > bounds[3]) {\n            top -= targetHeight;\n            tAttachment.top = 'top';\n\n            top -= height;\n            eAttachment.top = 'bottom';\n\n          } else if (eAttachment.top === 'bottom' && top < bounds[1] && top + (height * 2 - targetHeight) <= bounds[3]) {\n            top += height - targetHeight;\n            tAttachment.top = 'top';\n\n            eAttachment.top = 'top';\n\n          }\n        }\n\n        if (tAttachment.top === 'middle') {\n          if (top + height > bounds[3] && eAttachment.top === 'top') {\n            top -= height;\n            eAttachment.top = 'bottom';\n\n          } else if (top < bounds[1] && eAttachment.top === 'bottom') {\n            top += height;\n            eAttachment.top = 'top';\n          }\n        }\n      }\n\n      if (changeAttachX === 'target' || changeAttachX === 'both') {\n        if (left < bounds[0] && tAttachment.left === 'left') {\n          left += targetWidth;\n          tAttachment.left = 'right';\n        }\n\n        if (left + width > bounds[2] && tAttachment.left === 'right') {\n          left -= targetWidth;\n          tAttachment.left = 'left';\n        }\n      }\n\n      if (changeAttachX === 'together') {\n        if (left < bounds[0] && tAttachment.left === 'left') {\n          if (eAttachment.left === 'right') {\n            left += targetWidth;\n            tAttachment.left = 'right';\n\n            left += width;\n            eAttachment.left = 'left';\n\n          } else if (eAttachment.left === 'left') {\n            left += targetWidth;\n            tAttachment.left = 'right';\n\n            left -= width;\n            eAttachment.left = 'right';\n          }\n\n        } else if (left + width > bounds[2] && tAttachment.left === 'right') {\n          if (eAttachment.left === 'left') {\n            left -= targetWidth;\n            tAttachment.left = 'left';\n\n            left -= width;\n            eAttachment.left = 'right';\n\n          } else if (eAttachment.left === 'right') {\n            left -= targetWidth;\n            tAttachment.left = 'left';\n\n            left += width;\n            eAttachment.left = 'left';\n          }\n\n        } else if (tAttachment.left === 'center') {\n          if (left + width > bounds[2] && eAttachment.left === 'left') {\n            left -= width;\n            eAttachment.left = 'right';\n\n          } else if (left < bounds[0] && eAttachment.left === 'right') {\n            left += width;\n            eAttachment.left = 'left';\n          }\n        }\n      }\n\n      if (changeAttachY === 'element' || changeAttachY === 'both') {\n        if (top < bounds[1] && eAttachment.top === 'bottom') {\n          top += height;\n          eAttachment.top = 'top';\n        }\n\n        if (top + height > bounds[3] && eAttachment.top === 'top') {\n          top -= height;\n          eAttachment.top = 'bottom';\n        }\n      }\n\n      if (changeAttachX === 'element' || changeAttachX === 'both') {\n        if (left < bounds[0]) {\n          if (eAttachment.left === 'right') {\n            left += width;\n            eAttachment.left = 'left';\n          } else if (eAttachment.left === 'center') {\n            left += (width / 2);\n            eAttachment.left = 'left';\n          }\n        }\n\n        if (left + width > bounds[2]) {\n          if (eAttachment.left === 'left') {\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (eAttachment.left === 'center') {\n            left -= (width / 2);\n            eAttachment.left = 'right';\n          }\n        }\n      }\n\n      if (typeof pin === 'string') {\n        pin = pin.split(',').map((p) => p.trim());\n      } else if (pin === true) {\n        pin = ['top', 'left', 'right', 'bottom'];\n      }\n\n      pin = pin || [];\n\n      const pinned = [];\n      const oob = [];\n\n      if (top < bounds[1]) {\n        if (pin.indexOf('top') >= 0) {\n          top = bounds[1];\n          pinned.push('top');\n        } else {\n          oob.push('top');\n        }\n      }\n\n      if (top + height > bounds[3]) {\n        if (pin.indexOf('bottom') >= 0) {\n          top = bounds[3] - height;\n          pinned.push('bottom');\n        } else {\n          oob.push('bottom');\n        }\n      }\n\n      if (left < bounds[0]) {\n        if (pin.indexOf('left') >= 0) {\n          left = bounds[0];\n          pinned.push('left');\n        } else {\n          oob.push('left');\n        }\n      }\n\n      if (left + width > bounds[2]) {\n        if (pin.indexOf('right') >= 0) {\n          left = bounds[2] - width;\n          pinned.push('right');\n        } else {\n          oob.push('right');\n        }\n      }\n\n      if (pinned.length) {\n        let pinnedClass;\n        if (typeof this.options.pinnedClass !== 'undefined') {\n          pinnedClass = this.options.pinnedClass;\n        } else {\n          pinnedClass = this.getClass('pinned');\n        }\n\n        addClasses.push(pinnedClass);\n        pinned.forEach((side) => {\n          addClasses.push(`${pinnedClass}-${side}`);\n        });\n      }\n\n      if (oob.length) {\n        let oobClass;\n        if (typeof this.options.outOfBoundsClass !== 'undefined') {\n          oobClass = this.options.outOfBoundsClass;\n        } else {\n          oobClass = this.getClass('out-of-bounds');\n        }\n\n        addClasses.push(oobClass);\n        oob.forEach((side) => {\n          addClasses.push(`${oobClass}-${side}`);\n        });\n      }\n\n      if (pinned.indexOf('left') >= 0 || pinned.indexOf('right') >= 0) {\n        eAttachment.left = tAttachment.left = false;\n      }\n      if (pinned.indexOf('top') >= 0 || pinned.indexOf('bottom') >= 0) {\n        eAttachment.top = tAttachment.top = false;\n      }\n\n      if (tAttachment.top !== targetAttachment.top ||\n        tAttachment.left !== targetAttachment.left ||\n        eAttachment.top !== this.attachment.top ||\n        eAttachment.left !== this.attachment.left) {\n        this.updateAttachClasses(eAttachment, tAttachment);\n        this.trigger('update', {\n          attachment: eAttachment,\n          targetAttachment: tAttachment\n        });\n      }\n    });\n\n    defer(() => {\n      if (!(this.options.addTargetClasses === false)) {\n        updateClasses(this.target, addClasses, allClasses);\n      }\n      updateClasses(this.element, addClasses, allClasses);\n    });\n\n    return { top, left };\n  }\n});\n","import TetherBase from './utils';\n\nconst { getBounds, updateClasses, defer } = TetherBase.Utils;\n\nTetherBase.modules.push({\n  position({ top, left }) {\n    const { height, width } = this.cache('element-bounds', () => {\n      return getBounds(this.element);\n    });\n\n    const targetPos = this.getTargetBounds();\n\n    const bottom = top + height;\n    const right = left + width;\n\n    const abutted = [];\n    if (top <= targetPos.bottom && bottom >= targetPos.top) {\n      ['left', 'right'].forEach((side) => {\n        const targetPosSide = targetPos[side];\n        if (targetPosSide === left || targetPosSide === right) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    if (left <= targetPos.right && right >= targetPos.left) {\n      ['top', 'bottom'].forEach((side) => {\n        const targetPosSide = targetPos[side];\n        if (targetPosSide === top || targetPosSide === bottom) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    const allClasses = [];\n    const addClasses = [];\n\n    const sides = ['left', 'top', 'right', 'bottom'];\n    allClasses.push(this.getClass('abutted'));\n    sides.forEach((side) => {\n      allClasses.push(`${this.getClass('abutted')}-${side}`);\n    });\n\n    if (abutted.length) {\n      addClasses.push(this.getClass('abutted'));\n    }\n\n    abutted.forEach((side) => {\n      addClasses.push(`${this.getClass('abutted')}-${side}`);\n    });\n\n    defer(() => {\n      if (!(this.options.addTargetClasses === false)) {\n        updateClasses(this.target, addClasses, allClasses);\n      }\n      updateClasses(this.element, addClasses, allClasses);\n    });\n\n    return true;\n  }\n});\n","import TetherBase from './utils';\n\nTetherBase.modules.push({\n  position({ top, left }) {\n    if (!this.options.shift) {\n      return;\n    }\n\n    let { shift } = this.options;\n    if (typeof shift === 'function') {\n      shift = shift.call(this, { top, left });\n    }\n\n    let shiftTop, shiftLeft;\n    if (typeof shift === 'string') {\n      shift = shift.split(' ');\n      shift[1] = shift[1] || shift[0];\n\n      ([shiftTop, shiftLeft] = shift);\n\n      shiftTop = parseFloat(shiftTop, 10);\n      shiftLeft = parseFloat(shiftLeft, 10);\n    } else {\n      ([shiftTop, shiftLeft] = [shift.top, shift.left]);\n    }\n\n    top += shiftTop;\n    left += shiftLeft;\n\n    return { top, left };\n  }\n});\n","/* globals TetherBase */\n\nimport '../css/tether.scss';\nimport '../css/tether-theme-arrows.scss';\nimport '../css/tether-theme-arrows-dark.scss';\nimport '../css/tether-theme-basic.scss';\nimport { Evented } from './evented';\nimport TetherBase from './utils';\nimport './constraint';\nimport './abutment';\nimport './shift';\n\nconst {\n  getScrollParents,\n  getBounds,\n  getOffsetParent,\n  extend,\n  addClass,\n  removeClass,\n  updateClasses,\n  defer,\n  flush,\n  getScrollBarSize,\n  removeUtilElements\n} = TetherBase.Utils;\n\nfunction isFullscreenElement(e) {\n  let d = e.ownerDocument;\n  let fe = d.fullscreenElement || d.webkitFullscreenElement || d.mozFullScreenElement || d.msFullscreenElement;\n  return fe === e;\n}\n\nfunction within(a, b, diff = 1) {\n  return (a + diff >= b && b >= a - diff);\n}\n\nconst transformKey = (() => {\n  if (typeof document === 'undefined') {\n    return '';\n  }\n  const el = document.createElement('div');\n\n  const transforms = ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform'];\n  for (let i = 0; i < transforms.length; ++i) {\n    const key = transforms[i];\n    if (el.style[key] !== undefined) {\n      return key;\n    }\n  }\n})();\n\nconst tethers = [];\n\nconst position = () => {\n  tethers.forEach((tether) => {\n    tether.position(false);\n  });\n  flush();\n};\n\nfunction now() {\n  if (typeof performance === 'object' && typeof performance.now === 'function') {\n    return performance.now();\n  }\n  return +new Date;\n}\n\n(() => {\n  let lastCall = null;\n  let lastDuration = null;\n  let pendingTimeout = null;\n\n  const tick = () => {\n    if (typeof lastDuration !== 'undefined' && lastDuration > 16) {\n      // We voluntarily throttle ourselves if we can't manage 60fps\n      lastDuration = Math.min(lastDuration - 16, 250);\n\n      // Just in case this is the last event, remember to position just once more\n      pendingTimeout = setTimeout(tick, 250);\n      return;\n    }\n\n    if (typeof lastCall !== 'undefined' && (now() - lastCall) < 10) {\n      // Some browsers call events a little too frequently, refuse to run more than is reasonable\n      return;\n    }\n\n    if (pendingTimeout != null) {\n      clearTimeout(pendingTimeout);\n      pendingTimeout = null;\n    }\n\n    lastCall = now();\n    position();\n    lastDuration = now() - lastCall;\n  };\n\n  if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {\n    ['resize', 'scroll', 'touchmove'].forEach((event) => {\n      window.addEventListener(event, tick);\n    });\n  }\n})();\n\nconst MIRROR_LR = {\n  center: 'center',\n  left: 'right',\n  right: 'left'\n};\n\nconst MIRROR_TB = {\n  middle: 'middle',\n  top: 'bottom',\n  bottom: 'top'\n};\n\nconst OFFSET_MAP = {\n  top: 0,\n  left: 0,\n  middle: '50%',\n  center: '50%',\n  bottom: '100%',\n  right: '100%'\n};\n\nconst autoToFixedAttachment = (attachment, relativeToAttachment) => {\n  let { left, top } = attachment;\n\n  if (left === 'auto') {\n    left = MIRROR_LR[relativeToAttachment.left];\n  }\n\n  if (top === 'auto') {\n    top = MIRROR_TB[relativeToAttachment.top];\n  }\n\n  return { left, top };\n};\n\nconst attachmentToOffset = (attachment) => {\n  let { left, top } = attachment;\n\n  if (typeof OFFSET_MAP[attachment.left] !== 'undefined') {\n    left = OFFSET_MAP[attachment.left];\n  }\n\n  if (typeof OFFSET_MAP[attachment.top] !== 'undefined') {\n    top = OFFSET_MAP[attachment.top];\n  }\n\n  return { left, top };\n};\n\nfunction addOffset(...offsets) {\n  const out = { top: 0, left: 0 };\n\n  offsets.forEach(({ top, left }) => {\n    if (typeof top === 'string') {\n      top = parseFloat(top, 10);\n    }\n    if (typeof left === 'string') {\n      left = parseFloat(left, 10);\n    }\n\n    out.top += top;\n    out.left += left;\n  });\n\n  return out;\n}\n\nfunction offsetToPx(offset, size) {\n  if (typeof offset.left === 'string' && offset.left.indexOf('%') !== -1) {\n    offset.left = parseFloat(offset.left, 10) / 100 * size.width;\n  }\n  if (typeof offset.top === 'string' && offset.top.indexOf('%') !== -1) {\n    offset.top = parseFloat(offset.top, 10) / 100 * size.height;\n  }\n\n  return offset;\n}\n\nconst parseOffset = (value) => {\n  const [top, left] = value.split(' ');\n  return { top, left };\n};\nconst parseAttachment = parseOffset;\n\nclass TetherClass extends Evented {\n\n  constructor(options) {\n    super();\n    this.position = this.position.bind(this);\n\n    tethers.push(this);\n\n    this.history = [];\n\n    this.setOptions(options, false);\n\n    TetherBase.modules.forEach((module) => {\n      if (typeof module.initialize !== 'undefined') {\n        module.initialize.call(this);\n      }\n    });\n\n    this.position();\n  }\n\n  getClass(key = '') {\n    const { classes } = this.options;\n    if (typeof classes !== 'undefined' && classes[key]) {\n      return this.options.classes[key];\n    } else if (this.options.classPrefix) {\n      return `${this.options.classPrefix}-${key}`;\n    } else {\n      return key;\n    }\n  }\n\n  setOptions(options, pos = true) {\n    const defaults = {\n      offset: '0 0',\n      targetOffset: '0 0',\n      targetAttachment: 'auto auto',\n      classPrefix: 'tether'\n    };\n\n    this.options = extend(defaults, options);\n\n    let { element, target, targetModifier } = this.options;\n    this.element = element;\n    this.target = target;\n    this.targetModifier = targetModifier;\n\n    if (this.target === 'viewport') {\n      this.target = document.body;\n      this.targetModifier = 'visible';\n    } else if (this.target === 'scroll-handle') {\n      this.target = document.body;\n      this.targetModifier = 'scroll-handle';\n    }\n\n    ['element', 'target'].forEach((key) => {\n      if (typeof this[key] === 'undefined') {\n        throw new Error('Tether Error: Both element and target must be defined');\n      }\n\n      if (typeof this[key].jquery !== 'undefined') {\n        this[key] = this[key][0];\n      } else if (typeof this[key] === 'string') {\n        this[key] = document.querySelector(this[key]);\n      }\n    });\n\n    addClass(this.element, this.getClass('element'));\n    if (!(this.options.addTargetClasses === false)) {\n      addClass(this.target, this.getClass('target'));\n    }\n\n    if (!this.options.attachment) {\n      throw new Error('Tether Error: You must provide an attachment');\n    }\n\n    this.targetAttachment = parseAttachment(this.options.targetAttachment);\n    this.attachment = parseAttachment(this.options.attachment);\n    this.offset = parseOffset(this.options.offset);\n    this.targetOffset = parseOffset(this.options.targetOffset);\n\n    if (typeof this.scrollParents !== 'undefined') {\n      this.disable();\n    }\n\n    if (this.targetModifier === 'scroll-handle') {\n      this.scrollParents = [this.target];\n    } else {\n      this.scrollParents = getScrollParents(this.target);\n    }\n\n    if (!(this.options.enabled === false)) {\n      this.enable(pos);\n    }\n  }\n\n  getTargetBounds() {\n    if (typeof this.targetModifier !== 'undefined') {\n      if (this.targetModifier === 'visible') {\n        if (this.target === document.body) {\n          return { top: pageYOffset, left: pageXOffset, height: innerHeight, width: innerWidth };\n        } else {\n          const bounds = getBounds(this.target);\n\n          const out = {\n            height: bounds.height,\n            width: bounds.width,\n            top: bounds.top,\n            left: bounds.left\n          };\n\n          out.height = Math.min(out.height, bounds.height - (pageYOffset - bounds.top));\n          out.height = Math.min(out.height, bounds.height - ((bounds.top + bounds.height) - (pageYOffset + innerHeight)));\n          out.height = Math.min(innerHeight, out.height);\n          out.height -= 2;\n\n          out.width = Math.min(out.width, bounds.width - (pageXOffset - bounds.left));\n          out.width = Math.min(out.width, bounds.width - ((bounds.left + bounds.width) - (pageXOffset + innerWidth)));\n          out.width = Math.min(innerWidth, out.width);\n          out.width -= 2;\n\n          if (out.top < pageYOffset) {\n            out.top = pageYOffset;\n          }\n          if (out.left < pageXOffset) {\n            out.left = pageXOffset;\n          }\n\n          return out;\n        }\n      } else if (this.targetModifier === 'scroll-handle') {\n        let bounds;\n        let { target } = this;\n        if (target === document.body) {\n          target = document.documentElement;\n\n          bounds = {\n            left: pageXOffset,\n            top: pageYOffset,\n            height: innerHeight,\n            width: innerWidth\n          };\n        } else {\n          bounds = getBounds(target);\n        }\n\n        const style = getComputedStyle(target);\n\n        const hasBottomScroll = (\n          target.scrollWidth > target.clientWidth ||\n          [style.overflow, style.overflowX].indexOf('scroll') >= 0 ||\n          this.target !== document.body\n        );\n\n        let scrollBottom = 0;\n        if (hasBottomScroll) {\n          scrollBottom = 15;\n        }\n\n        const height = bounds.height - parseFloat(style.borderTopWidth) - parseFloat(style.borderBottomWidth) - scrollBottom;\n\n        const out = {\n          width: 15,\n          height: height * 0.975 * (height / target.scrollHeight),\n          left: bounds.left + bounds.width - parseFloat(style.borderLeftWidth) - 15\n        };\n\n        let fitAdj = 0;\n        if (height < 408 && this.target === document.body) {\n          fitAdj = -0.00011 * Math.pow(height, 2) - 0.00727 * height + 22.58;\n        }\n\n        if (this.target !== document.body) {\n          out.height = Math.max(out.height, 24);\n        }\n\n        const scrollPercentage = this.target.scrollTop / (target.scrollHeight - height);\n        out.top = scrollPercentage * (height - out.height - fitAdj) + bounds.top + parseFloat(style.borderTopWidth);\n\n        if (this.target === document.body) {\n          out.height = Math.max(out.height, 24);\n        }\n\n        return out;\n      }\n    } else {\n      return getBounds(this.target);\n    }\n  }\n\n  clearCache() {\n    this._cache = {};\n  }\n\n  cache(k, getter) {\n    // More than one module will often need the same DOM info, so\n    // we keep a cache which is cleared on each position call\n    if (typeof this._cache === 'undefined') {\n      this._cache = {};\n    }\n\n    if (typeof this._cache[k] === 'undefined') {\n      this._cache[k] = getter.call(this);\n    }\n\n    return this._cache[k];\n  }\n\n  enable(pos = true) {\n    if (!(this.options.addTargetClasses === false)) {\n      addClass(this.target, this.getClass('enabled'));\n    }\n    addClass(this.element, this.getClass('enabled'));\n    this.enabled = true;\n\n    this.scrollParents.forEach((parent) => {\n      if (parent !== this.target.ownerDocument) {\n        parent.addEventListener('scroll', this.position);\n      }\n    });\n\n    if (pos) {\n      this.position();\n    }\n  }\n\n  disable() {\n    removeClass(this.target, this.getClass('enabled'));\n    removeClass(this.element, this.getClass('enabled'));\n    this.enabled = false;\n\n    if (typeof this.scrollParents !== 'undefined') {\n      this.scrollParents.forEach((parent) => {\n        parent.removeEventListener('scroll', this.position);\n      });\n    }\n  }\n\n  destroy() {\n    this.disable();\n\n    tethers.forEach((tether, i) => {\n      if (tether === this) {\n        tethers.splice(i, 1);\n      }\n    });\n\n    // Remove any elements we were using for convenience from the DOM\n    if (tethers.length === 0) {\n      removeUtilElements();\n    }\n  }\n\n  updateAttachClasses(elementAttach, targetAttach) {\n    elementAttach = elementAttach || this.attachment;\n    targetAttach = targetAttach || this.targetAttachment;\n    const sides = ['left', 'top', 'bottom', 'right', 'middle', 'center'];\n\n    if (typeof this._addAttachClasses !== 'undefined' && this._addAttachClasses.length) {\n      // updateAttachClasses can be called more than once in a position call, so\n      // we need to clean up after ourselves such that when the last defer gets\n      // ran it doesn't add any extra classes from previous calls.\n      this._addAttachClasses.splice(0, this._addAttachClasses.length);\n    }\n\n    if (typeof this._addAttachClasses === 'undefined') {\n      this._addAttachClasses = [];\n    }\n    const add = this._addAttachClasses;\n\n    if (elementAttach.top) {\n      add.push(`${this.getClass('element-attached')}-${elementAttach.top}`);\n    }\n    if (elementAttach.left) {\n      add.push(`${this.getClass('element-attached')}-${elementAttach.left}`);\n    }\n    if (targetAttach.top) {\n      add.push(`${this.getClass('target-attached')}-${targetAttach.top}`);\n    }\n    if (targetAttach.left) {\n      add.push(`${this.getClass('target-attached')}-${targetAttach.left}`);\n    }\n\n    const all = [];\n    sides.forEach((side) => {\n      all.push(`${this.getClass('element-attached')}-${side}`);\n      all.push(`${this.getClass('target-attached')}-${side}`);\n    });\n\n    defer(() => {\n      if (!(typeof this._addAttachClasses !== 'undefined')) {\n        return;\n      }\n\n      updateClasses(this.element, this._addAttachClasses, all);\n      if (!(this.options.addTargetClasses === false)) {\n        updateClasses(this.target, this._addAttachClasses, all);\n      }\n\n      delete this._addAttachClasses;\n    });\n  }\n\n  position(flushChanges = true) {\n    // flushChanges commits the changes immediately, leave true unless you are positioning multiple\n    // tethers (in which case call Tether.Utils.flush yourself when you're done)\n\n    if (!this.enabled) {\n      return;\n    }\n\n    this.clearCache();\n\n    // Turn 'auto' attachments into the appropriate corner or edge\n    const targetAttachment = autoToFixedAttachment(this.targetAttachment, this.attachment);\n\n    this.updateAttachClasses(this.attachment, targetAttachment);\n\n    const elementPos = this.cache('element-bounds', () => {\n      return getBounds(this.element);\n    });\n\n    let { width, height } = elementPos;\n\n    if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n      // We cache the height and width to make it possible to position elements that are\n      // getting hidden.\n      ({ width, height } = this.lastSize);\n    } else {\n      this.lastSize = { width, height };\n    }\n\n    const targetPos = this.cache('target-bounds', () => {\n      return this.getTargetBounds();\n    });\n    const targetSize = targetPos;\n\n    // Get an actual px offset from the attachment\n    let offset = offsetToPx(attachmentToOffset(this.attachment), { width, height });\n    let targetOffset = offsetToPx(attachmentToOffset(targetAttachment), targetSize);\n\n    const manualOffset = offsetToPx(this.offset, { width, height });\n    const manualTargetOffset = offsetToPx(this.targetOffset, targetSize);\n\n    // Add the manually provided offset\n    offset = addOffset(offset, manualOffset);\n    targetOffset = addOffset(targetOffset, manualTargetOffset);\n\n    // It's now our goal to make (element position + offset) == (target position + target offset)\n    let left = targetPos.left + targetOffset.left - offset.left;\n    let top = targetPos.top + targetOffset.top - offset.top;\n\n    for (let i = 0; i < TetherBase.modules.length; ++i) {\n      const module = TetherBase.modules[i];\n      const ret = module.position.call(this, {\n        left,\n        top,\n        targetAttachment,\n        targetPos,\n        elementPos,\n        offset,\n        targetOffset,\n        manualOffset,\n        manualTargetOffset,\n        scrollbarSize,\n        attachment: this.attachment\n      });\n\n      if (ret === false) {\n        return false;\n      } else if (typeof ret === 'undefined' || typeof ret !== 'object') {\n        continue;\n      } else {\n        ({ top, left } = ret);\n      }\n    }\n\n    // We describe the position three different ways to give the optimizer\n    // a chance to decide the best possible way to position the element\n    // with the fewest repaints.\n    const next = {\n      // It's position relative to the page (absolute positioning when\n      // the element is a child of the body)\n      page: {\n        top,\n        left\n      },\n\n      // It's position relative to the viewport (fixed positioning)\n      viewport: {\n        top: top - pageYOffset,\n        bottom: pageYOffset - top - height + innerHeight,\n        left: left - pageXOffset,\n        right: pageXOffset - left - width + innerWidth\n      }\n    };\n\n    let doc = this.target.ownerDocument;\n    let win = doc.defaultView;\n\n    let scrollbarSize;\n    if (win.innerHeight > doc.documentElement.clientHeight) {\n      scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n      next.viewport.bottom -= scrollbarSize.height;\n    }\n\n    if (win.innerWidth > doc.documentElement.clientWidth) {\n      scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n      next.viewport.right -= scrollbarSize.width;\n    }\n\n    if (['', 'static'].indexOf(doc.body.style.position) === -1 ||\n      ['', 'static'].indexOf(doc.body.parentElement.style.position) === -1) {\n      // Absolute positioning in the body will be relative to the page, not the 'initial containing block'\n      next.page.bottom = doc.body.scrollHeight - top - height;\n      next.page.right = doc.body.scrollWidth - left - width;\n    }\n\n    if (typeof this.options.optimizations !== 'undefined' &&\n      this.options.optimizations.moveElement !== false &&\n      !(typeof this.targetModifier !== 'undefined')) {\n      const offsetParent = this.cache('target-offsetparent', () => getOffsetParent(this.target));\n      const offsetPosition = this.cache('target-offsetparent-bounds', () => getBounds(offsetParent));\n      const offsetParentStyle = getComputedStyle(offsetParent);\n      const offsetParentSize = offsetPosition;\n\n      const offsetBorder = {};\n      ['Top', 'Left', 'Bottom', 'Right'].forEach((side) => {\n        offsetBorder[side.toLowerCase()] = parseFloat(offsetParentStyle[`border${side}Width`]);\n      });\n\n      offsetPosition.right = doc.body.scrollWidth - offsetPosition.left - offsetParentSize.width + offsetBorder.right;\n      offsetPosition.bottom = doc.body.scrollHeight - offsetPosition.top - offsetParentSize.height + offsetBorder.bottom;\n\n      if (next.page.top >= (offsetPosition.top + offsetBorder.top) && next.page.bottom >= offsetPosition.bottom) {\n        if (next.page.left >= (offsetPosition.left + offsetBorder.left) && next.page.right >= offsetPosition.right) {\n          // We're within the visible part of the target's scroll parent\n          const { scrollLeft, scrollTop } = offsetParent;\n\n          // It's position relative to the target's offset parent (absolute positioning when\n          // the element is moved to be a child of the target's offset parent).\n          next.offset = {\n            top: next.page.top - offsetPosition.top + scrollTop - offsetBorder.top,\n            left: next.page.left - offsetPosition.left + scrollLeft - offsetBorder.left\n          };\n        }\n      }\n    }\n\n    // We could also travel up the DOM and try each containing context, rather than only\n    // looking at the body, but we're gonna get diminishing returns.\n\n    this.move(next);\n\n    this.history.unshift(next);\n\n    if (this.history.length > 3) {\n      this.history.pop();\n    }\n\n    if (flushChanges) {\n      flush();\n    }\n\n    return true;\n  }\n\n  // THE ISSUE\n  move(pos) {\n    if (!(typeof this.element.parentNode !== 'undefined')) {\n      return;\n    }\n\n    const same = {};\n\n    for (let type in pos) {\n      same[type] = {};\n\n      for (let key in pos[type]) {\n        let found = false;\n\n        for (let i = 0; i < this.history.length; ++i) {\n          const point = this.history[i];\n          if (typeof point[type] !== 'undefined' &&\n            !within(point[type][key], pos[type][key])) {\n            found = true;\n            break;\n          }\n\n        }\n\n        if (!found) {\n          same[type][key] = true;\n        }\n      }\n    }\n\n    let css = { top: '', left: '', right: '', bottom: '' };\n\n    const transcribe = (_same, _pos) => {\n      const hasOptimizations = typeof this.options.optimizations !== 'undefined';\n      const gpu = hasOptimizations ? this.options.optimizations.gpu : null;\n      if (gpu !== false) {\n        let yPos, xPos;\n        if (_same.top) {\n          css.top = 0;\n          yPos = _pos.top;\n        } else {\n          css.bottom = 0;\n          yPos = -_pos.bottom;\n        }\n\n        if (_same.left) {\n          css.left = 0;\n          xPos = _pos.left;\n        } else {\n          css.right = 0;\n          xPos = -_pos.right;\n        }\n\n        if (typeof window.devicePixelRatio === 'number' && devicePixelRatio % 1 === 0) {\n          xPos = Math.round(xPos * devicePixelRatio) / devicePixelRatio;\n          yPos = Math.round(yPos * devicePixelRatio) / devicePixelRatio;\n        }\n\n        css[transformKey] = `translateX(${xPos}px) translateY(${yPos}px)`;\n\n        if (transformKey !== 'msTransform') {\n          // The Z transform will keep this in the GPU (faster, and prevents artifacts),\n          // but IE9 doesn't support 3d transforms and will choke.\n          css[transformKey] += ' translateZ(0)';\n        }\n\n      } else {\n        if (_same.top) {\n          css.top = `${_pos.top}px`;\n        } else {\n          css.bottom = `${_pos.bottom}px`;\n        }\n\n        if (_same.left) {\n          css.left = `${_pos.left}px`;\n        } else {\n          css.right = `${_pos.right}px`;\n        }\n      }\n    };\n\n    const hasOptimizations = typeof this.options.optimizations !== 'undefined';\n    let allowPositionFixed = true;\n\n    if (hasOptimizations && this.options.optimizations.allowPositionFixed === false) {\n      allowPositionFixed = false;\n    }\n\n    let moved = false;\n    if ((same.page.top || same.page.bottom) && (same.page.left || same.page.right)) {\n      css.position = 'absolute';\n      transcribe(same.page, pos.page);\n\n    } else if (allowPositionFixed && (same.viewport.top || same.viewport.bottom) && (same.viewport.left || same.viewport.right)) {\n      css.position = 'fixed';\n      transcribe(same.viewport, pos.viewport);\n    } else if (typeof same.offset !== 'undefined' && same.offset.top && same.offset.left) {\n      css.position = 'absolute';\n      const offsetParent = this.cache('target-offsetparent', () => getOffsetParent(this.target));\n\n      if (getOffsetParent(this.element) !== offsetParent) {\n        defer(() => {\n          this.element.parentNode.removeChild(this.element);\n          offsetParent.appendChild(this.element);\n        });\n      }\n\n      transcribe(same.offset, pos.offset);\n      moved = true;\n\n    } else {\n      css.position = 'absolute';\n      transcribe({ top: true, left: true }, pos.page);\n    }\n\n    if (!moved) {\n      if (this.options.bodyElement) {\n        if (this.element.parentNode !== this.options.bodyElement) {\n          this.options.bodyElement.appendChild(this.element);\n        }\n      } else {\n        let offsetParentIsBody = true;\n\n        let currentNode = this.element.parentNode;\n        while (currentNode && currentNode.nodeType === 1 && currentNode.tagName !== 'BODY' && !isFullscreenElement(currentNode)) {\n          if (getComputedStyle(currentNode).position !== 'static') {\n            offsetParentIsBody = false;\n            break;\n          }\n\n          currentNode = currentNode.parentNode;\n        }\n\n        if (!offsetParentIsBody) {\n          this.element.parentNode.removeChild(this.element);\n          this.element.ownerDocument.body.appendChild(this.element);\n        }\n      }\n    }\n\n    // Any css change will trigger a repaint, so let's avoid one if nothing changed\n    const writeCSS = {};\n    let write = false;\n    for (let key in css) {\n      let val = css[key];\n      let elVal = this.element.style[key];\n\n      if (elVal !== val) {\n        write = true;\n        writeCSS[key] = val;\n      }\n    }\n\n    if (write) {\n      defer(() => {\n        extend(this.element.style, writeCSS);\n        this.trigger('repositioned');\n      });\n    }\n  }\n}\n\nTetherClass.modules = [];\n\nTetherBase.position = position;\n\nlet Tether = extend(TetherClass, TetherBase);\n\nTether.modules.push({\n  initialize() {\n    this.markers = {};\n\n    ['target', 'element'].forEach((type) => {\n      const el = document.createElement('div');\n      el.className = this.getClass(`${type}-marker`);\n\n      const dot = document.createElement('div');\n      dot.className = this.getClass('marker-dot');\n      el.appendChild(dot);\n\n      this[type].appendChild(el);\n\n      this.markers[type] = { dot, el };\n    });\n  },\n\n  position({ manualOffset, manualTargetOffset }) {\n    const offsets = {\n      element: manualOffset,\n      target: manualTargetOffset\n    };\n\n    for (let type in offsets) {\n      const offset = offsets[type];\n      for (let side in offset) {\n        let val = offset[side];\n        const notString = typeof val !== 'string';\n        if (notString ||\n          val.indexOf('%') === -1 &&\n          val.indexOf('px') === -1) {\n          val += 'px';\n        }\n\n        if (this.markers[type].dot.style[side] !== val) {\n          this.markers[type].dot.style[side] = val;\n        }\n      }\n    }\n\n    return true;\n  }\n});\n\nexport default Tether;\n"],"names":["Evented","on","event","handler","ctx","once","bindings","push","off","i","length","splice","trigger","args","context","apply","TetherBase","modules","zeroElement","getActualBoundingClientRect","node","boundingRect","getBoundingClientRect","rect","k","ownerDocument","document","frameElement","defaultView","frameRect","top","bottom","left","right","err","getScrollParents","el","computedStyle","getComputedStyle","position","parents","parent","parentNode","nodeType","style","overflow","overflowX","overflowY","test","indexOf","body","uniqueId","id","zeroPosCache","getOrigin","contains","createElement","setAttribute","extend","appendChild","getAttribute","defer","removeUtilElements","removeChild","getBounds","doc","documentElement","docEl","box","origin","width","scrollWidth","height","scrollHeight","clientTop","clientLeft","clientWidth","clientHeight","getOffsetParent","offsetParent","_scrollBarSize","getScrollBarSize","inner","outer","pointerEvents","visibility","widthContained","offsetWidth","widthScroll","out","Array","prototype","arguments","slice","forEach","obj","key","hasOwnProperty","call","removeClass","name","classList","split","cls","trim","remove","regex","RegExp","join","className","getClassName","replace","setClassName","addClass","add","hasClass","SVGAnimatedString","baseVal","updateClasses","all","deferred","fn","flush","pop","Utils","BOUNDS_FORMAT","getBoundingRect","tether","to","scrollParents","pageXOffset","pageYOffset","innerWidth","innerHeight","size","pos","win","side","toUpperCase","substr","parseFloat","targetAttachment","options","constraints","cache","element","lastSize","targetSize","getTargetBounds","targetHeight","targetWidth","allClasses","getClass","constraint","outOfBoundsClass","pinnedClass","addClasses","tAttachment","eAttachment","attachment","pin","changeAttachX","changeAttachY","bounds","map","p","pinned","oob","oobClass","updateAttachClasses","addTargetClasses","target","targetPos","abutted","targetPosSide","sides","shift","shiftTop","shiftLeft","isFullscreenElement","e","d","fe","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","within","a","b","diff","transformKey","transforms","undefined","tethers","now","performance","Date","lastCall","lastDuration","pendingTimeout","tick","Math","min","setTimeout","clearTimeout","window","addEventListener","MIRROR_LR","center","MIRROR_TB","middle","OFFSET_MAP","autoToFixedAttachment","relativeToAttachment","attachmentToOffset","addOffset","offsets","offsetToPx","offset","parseOffset","value","parseAttachment","TetherClass","bind","history","setOptions","module","initialize","classes","classPrefix","defaults","targetOffset","targetModifier","Error","jquery","querySelector","disable","enabled","enable","hasBottomScroll","scrollBottom","borderTopWidth","borderBottomWidth","borderLeftWidth","fitAdj","pow","max","scrollPercentage","scrollTop","clearCache","_cache","getter","removeEventListener","destroy","elementAttach","targetAttach","_addAttachClasses","flushChanges","elementPos","manualOffset","manualTargetOffset","ret","scrollbarSize","next","page","viewport","parentElement","optimizations","moveElement","offsetPosition","offsetParentStyle","offsetParentSize","offsetBorder","toLowerCase","scrollLeft","move","unshift","same","type","found","point","css","transcribe","_same","_pos","hasOptimizations","gpu","yPos","xPos","devicePixelRatio","round","allowPositionFixed","moved","bodyElement","offsetParentIsBody","currentNode","tagName","writeCSS","write","val","elVal","Tether","markers","dot","notString"],"mappings":"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"}